<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="cart.css">
    <link rel="stylesheet" href="Navbar.css">
    <title>Cart Page</title>
</head>


<body>
 <!-- Navbar -->
 <nav id="phu-navbar" class="navbar navbar-expand-lg navbar-light bg-light custom-navbar header fixed-top phu-navbar"
 style="height: 50px;">
 <a class="navbar-brand" href="../HomePage.html" style="height: 100%;">
     <img src="../images/Avatar.jpg" alt="Logo" style="height: 100%;">
 </a>
 <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
     aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
     <span class="navbar-toggler-icon"></span>
 </button>

 <!-- Form tìm kiếm di chuyển ra ngoài collapse -->
 <form class="form-inline my-2 my-lg-0 ml-auto">
     <div class="input-group">
         <div class="input-group-prepend">
             <span class="input-group-text">
                 <i class="fas fa-search"></i>
             </span>
         </div>
         <input class="form-control mr-sm-2" type="search" placeholder="Tìm kiếm..." aria-label="Search">
         <div class="input-group-append">
             <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Tìm Kiếm</button>
         </div>
     </div>
 </form>

 <!-- Các nút trong thanh điều hướng -->
 <div class="collapse navbar-collapse" id="navbarSupportedContent">
     <ul class="navbar-nav ml-auto">
         <li class="nav-item active">
             <a class="nav-link" href="../HomePage.html">
                 <i class="fas fa-home"></i>
                 Trang Chủ
             </a>
         </li>
         <li class="nav-item active">
             <a id="account-link" class="nav-link" href="#">
                 <i class="fas fa-user"></i>
                 Tài Khoản
             </a>
             <div id="account-dropdown" class="account-dropdown">
                 <ul>
                     <li><a href="../UserInfo.html">Thông tin tài khoản</a></li>
                     <li><a href="../OrderManagement.html">Đơn hàng của tôi</a></li>
                     <li><a href="../SignOut.html">Đăng xuất</a></li>
                 </ul>
             </div>
         </li>
         <li class="nav-item active">
             <a class="nav-link" href="#">
                 <i class="fas fa-shopping-cart fa-lg fa-relative">
                     <span class="badge badge-danger">3</span>
                 </i>
             </a>
         </li>
     </ul>
 </div>
</nav>

    <div class="container n-cart">
        <table class="table">
            <thead>
                <tr>
                    <th scope="col"></th>
                    <th scope="col"></th>
                    <th scope="col">Tên sản phẩm</th>
                    <th scope="col">Giá</th>
                    <th scope="col">Số lượng</th>
                    <th scope="col">Tổng tiền</th>
                </tr>
            </thead>
            <tbody>
                <!-- Product 1 -->
                <tr class="product-row" data-price="50.00">
                    <td>
                        <input type="checkbox" class="form-check-input product-checkbox">
                    </td>
                    <td><img src="https://3dcomputer.vn/uploads/images/products/cac-man-hinh/rtx2080-gigabyte/geforce-rtx-2080-gaming-oc-8g.png"
                            alt="Product 1" class="img-thumbnail" style="width: 100px;"></td>
                    <td>Sản phẩm 1</td>
                    <td>$50.00</td>
                    <td>
                        <input type="number" class="form-control quantity-input" value="1">
                    </td>
                    <td class="total-price">$50.00</td>
                </tr>

                <!-- Product 2 -->
                <tr class="product-row" data-price="35.00">
                    <td>
                        <input type="checkbox" class="form-check-input product-checkbox">
                    </td>
                    <td><img src="https://halinhcomputer.vn/uploads/images/products/cac-man-hinh/galax-rtx-2080-sg-edition-8gb-gddr6.jpg"
                            alt="Product 2" class="img-thumbnail" style="width: 100px;"></td>
                    <td>Sản phẩm 2</td>
                    <td>$35.00</td>
                    <td>
                        <input type="number" class="form-control quantity-input" value="1">
                    </td>
                    <td class="total-price">$70.00</td>
                </tr>

                <!-- Add more products as needed -->

            </tbody>
        </table>

        <!-- Total Price -->
        <div class="text-right">
            <h4>Total: <span id="total-price">0.00</span></h4>
        </div>

        <!-- Checkout Button -->
        <div class="text-right mt-3">
            <a href="./checkout.html"><button class="btn btn-primary" onclick="proceedToCheckout()">Proceed to Checkout</button></a>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {
            // Update total price when quantity changes or product is selected/deselected
            $('.quantity-input, .product-checkbox').on('input', function () {
                var quantity = parseInt($(this).val());
                if (quantity < 1) {
                    // Display a confirmation dialog
                    var confirmRemove = window.confirm("Do you want to remove this product from the cart?");
                    if (confirmRemove) {
                        // User clicked 'OK', remove the product
                        $(this).closest('.product-row').remove();
                        updateTotalPrice();
                    } else {    
                        // User clicked 'Cancel', restore the quantity to 1
                        $(this).val(1);
                        updateTotalPrice();
                    }
                } else {
                    updateTotalPrice();
                }
            });

            // Initial total price calculation
            updateTotalPrice();

            function updateTotalPrice() {
                var totalPrice = 0;
                $('.product-row').each(function () {
                    var price = parseFloat($(this).data('price'));
                    var quantity = parseInt($(this).find('.quantity-input').val());
                    var total = price * quantity;

                    if ($(this).find('.product-checkbox').prop('checked')) {
                        totalPrice += total;
                    }

                    $(this).find('.total-price').text('$' + total.toFixed(2));
                });

                $('#total-price').text('$' + totalPrice.toFixed(2));
            }

            function proceedToCheckout() {
                // Add your checkout logic here
                alert("Proceeding to checkout. Implement your checkout logic here.");
            }
        });
    </script>

</body>

</html>